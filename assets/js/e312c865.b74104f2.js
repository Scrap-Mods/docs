"use strict";(self.webpackChunksm_docs=self.webpackChunksm_docs||[]).push([[927],{3905:(t,e,n)=>{n.d(e,{Zo:()=>d,kt:()=>m});var r=n(7294);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},l=Object.keys(t);for(r=0;r<l.length;r++)n=l[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(r=0;r<l.length;r++)n=l[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var s=r.createContext({}),p=function(t){var e=r.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},d=function(t){var e=p(t.components);return r.createElement(s.Provider,{value:e},t.children)},u="mdxType",c={inlineCode:"code",wrapper:function(t){var e=t.children;return r.createElement(r.Fragment,{},e)}},k=r.forwardRef((function(t,e){var n=t.components,a=t.mdxType,l=t.originalType,s=t.parentName,d=o(t,["components","mdxType","originalType","parentName"]),u=p(n),k=a,m=u["".concat(s,".").concat(k)]||u[k]||c[k]||l;return n?r.createElement(m,i(i({ref:e},d),{},{components:n})):r.createElement(m,i({ref:e},d))}));function m(t,e){var n=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var l=n.length,i=new Array(l);i[0]=k;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o[u]="string"==typeof t?t:a,i[1]=o;for(var p=2;p<l;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}k.displayName="MDXCreateElement"},2257:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const l={title:"30 - Player Movement"},i="Player Movement",o={unversionedId:"networking/packets/player-movement",id:"networking/packets/player-movement",title:"30 - Player Movement",description:"This packet contains pressed movement keys and the player's look direction. It does not contain any position coordinates.",source:"@site/docs/networking/packets/30-player-movement.mdx",sourceDirName:"networking/packets",slug:"/networking/packets/player-movement",permalink:"/docs/networking/packets/player-movement",draft:!1,editUrl:"https://pr.new/github.com/Scrap-Mods/docs/blob/main/docs/networking/packets/30-player-movement.mdx",tags:[],version:"current",sidebarPosition:30,frontMatter:{title:"30 - Player Movement"},sidebar:"networkingSidebar",previous:{title:"29 - Compound Packet",permalink:"/docs/networking/packets/compound-packet"},next:{title:"31 - Equipped Item Changed",permalink:"/docs/networking/packets/hotbar-item-changed"}},s={},p=[{value:"Structure",id:"structure",level:2},{value:"Keys bitfield",id:"keys-bitfield",level:3}],d={toc:p},u="wrapper";function c(t){let{components:e,...n}=t;return(0,a.kt)(u,(0,r.Z)({},d,n,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"player-movement"},"Player Movement"),(0,a.kt)("p",null,"This packet contains pressed movement keys and the player's look direction. It does not contain any position coordinates."),(0,a.kt)("p",null,"The client sends this packet to the server once every tick. If the client's framerate drops below the tickrate, at most one packet is sent per frame."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"ID"),": 0x1E (30)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Size"),": 8 bytes"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"LZ4 Compressed"),": Yes"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"State"),": Playing"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Bound To"),": Client -> Server")),(0,a.kt)("h2",{id:"structure"},"Structure"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Offset"),(0,a.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Field Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Notes"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"0x00"),(0,a.kt)("td",{parentName:"tr",align:null},"Tick"),(0,a.kt)("td",{parentName:"tr",align:null},"be u32"),(0,a.kt)("td",{parentName:"tr",align:null},"The current tick.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"0x04"),(0,a.kt)("td",{parentName:"tr",align:null},"Keys"),(0,a.kt)("td",{parentName:"tr",align:null},"u8 bitfield"),(0,a.kt)("td",{parentName:"tr",align:null},"Bitfield of which movement keys are pressed. See ",(0,a.kt)("a",{parentName:"td",href:"#keys-bitfield"},"Keys bitfield"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"0x05"),(0,a.kt)("td",{parentName:"tr",align:null},"Direction"),(0,a.kt)("td",{parentName:"tr",align:null},"u8"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("p",null,"The horizontal direction, relative to the player's yaw, the player is walking in or has last walked in. When the player stops walking, this value is not updated.")," Strafing right starts at ",(0,a.kt)("inlineCode",{parentName:"td"},"0")," and increases when changing the direction counter-clockwise (to the left). When using the keyboard, only distinct increments of ",(0,a.kt)("inlineCode",{parentName:"td"},"32")," can be achieved, but the server supports any value between ",(0,a.kt)("inlineCode",{parentName:"td"},"0")," and ",(0,a.kt)("inlineCode",{parentName:"td"},"255"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"0x06"),(0,a.kt)("td",{parentName:"tr",align:null},"Yaw"),(0,a.kt)("td",{parentName:"tr",align:null},"u8"),(0,a.kt)("td",{parentName:"tr",align:null},"The player's horizontal look rotation. A yaw of ",(0,a.kt)("inlineCode",{parentName:"td"},"0")," means the player is looking into the positive Y direction. Rotating counter-clockwise (to the left) increases the yaw. After reaching ",(0,a.kt)("inlineCode",{parentName:"td"},"255"),", the yaw overflows back to ",(0,a.kt)("inlineCode",{parentName:"td"},"0"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"0x07"),(0,a.kt)("td",{parentName:"tr",align:null},"Pitch"),(0,a.kt)("td",{parentName:"tr",align:null},"u8"),(0,a.kt)("td",{parentName:"tr",align:null},"The player's vertical look rotation. A pitch of ",(0,a.kt)("inlineCode",{parentName:"td"},"0")," means the player is looking straight down (into the negative Z direction). Looking straight up yields a pitch of ",(0,a.kt)("inlineCode",{parentName:"td"},"128"),".")))),(0,a.kt)("h3",{id:"keys-bitfield"},"Keys bitfield"),(0,a.kt)("p",null,"Contains information about which movement keys are pressed. All bits are always low while the player's character is seated or tumbling."),(0,a.kt)("table",null,(0,a.kt)("thead",null,(0,a.kt)("tr",null,(0,a.kt)("th",null,"Bits"),(0,a.kt)("th",null,"Field name"),(0,a.kt)("th",null,"Notes"))),(0,a.kt)("tbody",null,(0,a.kt)("tr",null,(0,a.kt)("td",null,"7"),(0,a.kt)("td",{rowspan:"3"},"Unused"),(0,a.kt)("td",{rowspan:"3"},"Guaranteed to not be used. Always low.")),(0,a.kt)("tr",null,(0,a.kt)("td",null,"6")),(0,a.kt)("tr",null,(0,a.kt)("td",null,"5")),(0,a.kt)("tr",null,(0,a.kt)("td",null,"4"),(0,a.kt)("td",null,"Aim"),(0,a.kt)("td",null,"High when the player is aiming with a tool. This value is set using",(0,a.kt)("a",{href:"https://scrapmechanic.com/api/userdata_Game_Tool.html#setMovementSlowDown"},(0,a.kt)("code",null,"Tool:setMovementSlowDown(boolean)")),"and read using",(0,a.kt)("a",{href:"https://scrapmechanic.com/api/userdata_Game_Character.html#isAiming"},(0,a.kt)("code",null,"Character:isAiming()")),".")),(0,a.kt)("tr",null,(0,a.kt)("td",null,"3"),(0,a.kt)("td",null,"Sprint"),(0,a.kt)("td",null,(0,a.kt)("p",null,"High when the player is sprinting while moving horizontally. Low in all other cases, including when the player is holding the Sprint button while standing still."),"Always lags one tick behind when starting a sprint from standstill. The sprint bitflag also continues to stay high for one more tick after the player has stopped moving horizontally.")),(0,a.kt)("tr",null,(0,a.kt)("td",null,"2"),(0,a.kt)("td",null,"Horizontal"),(0,a.kt)("td",null,"High when any of the Move Forward, Move Backward, Stafe Left or Strafe Right keys are pressed.")),(0,a.kt)("tr",null,(0,a.kt)("td",null,"1"),(0,a.kt)("td",null,"Crawl"),(0,a.kt)("td",null,"High when the player is holding the Crawl (crouch) keybind. This is not connected to the actual crawl state of the player's character. If the character is crawling and unable to stand up, the value can be either high or low depending on wether the player is holding the Crawl key or not.")),(0,a.kt)("tr",null,(0,a.kt)("td",null,"0"),(0,a.kt)("td",null,"Jump"),(0,a.kt)("td",null,"High when the player is holding the Jump button. The player's character does not have to be on the ground.")))))}c.isMDXComponent=!0}}]);