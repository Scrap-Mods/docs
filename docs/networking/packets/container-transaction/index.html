<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-networking/packets/container-transaction">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">32 - Container Transaction WIP | SM - Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.scrapmods.io/img/blue-bearing.png"><meta data-rh="true" name="twitter:image" content="https://docs.scrapmods.io/img/blue-bearing.png"><meta data-rh="true" property="og:url" content="https://docs.scrapmods.io/docs/networking/packets/container-transaction"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="32 - Container Transaction WIP | SM - Docs"><meta data-rh="true" name="description" content="This packet is sent when the player interacts with items inside of containers."><meta data-rh="true" property="og:description" content="This packet is sent when the player interacts with items inside of containers."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.scrapmods.io/docs/networking/packets/container-transaction"><link data-rh="true" rel="alternate" href="https://docs.scrapmods.io/docs/networking/packets/container-transaction" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.scrapmods.io/docs/networking/packets/container-transaction" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3d71ec00.css">
<link rel="preload" href="/assets/js/runtime~main.27fe9af3.js" as="script">
<link rel="preload" href="/assets/js/main.f6388a6a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.ico" alt="SM - Docs" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/favicon.ico" alt="SM - Docs" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SM - Docs</b></a><a class="navbar__item navbar__link" href="/docs/category/lua">Lua</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/category/common-structures">Networking</a><a class="navbar__item navbar__link" href="/docs/category/structures">Structures</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/category/misc">Misc</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/common-structures">Common Structures</a><button aria-label="Toggle the collapsible sidebar category &#x27;Common Structures&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/packets">Packets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Packets&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/hello">01 - Hello</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/server-info">02 - Server Info</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/request-passphrase">03 - Request Passphrase</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/respond-passphrase">04 - Respond Passphrase</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/client-accepted">05 - Client Accepted</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/file-checksums">06 - File Checksums</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/checksums-accepted">07 - Checksums Accepted</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/checksums-denied">08 - Checksums Denied</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/character-info">09 - Character Info</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/join-confirmation">10 - Join Confirmation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/script-initialization-data">11 - Script Initialization Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/generic-initialization-data">13 - Generic Initialization Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/display-message">18 - Display Message</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/display-alert-text">19 - Display Alert Text</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/unreliable-update">24 - Unreliable Update - WIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/script-data-s2c">25 - Script Data (S-&gt;C) - WIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/script-data-c2s">26 - Script Data (C-&gt;S) - WIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/generic-data-s2c">27 - Generic Data (S-&gt;C) - WIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/generic-data-c2s">28 - Generic Data (C-&gt;S) - WIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/compound-packet">29 - Compound Packet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/player-movement">30 - Player Movement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/hotbar-item-changed">31 - Equipped Item Changed</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/networking/packets/container-transaction">32 - Container Transaction WIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/drop-item-stack">33 - Drop Item Stack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/place">34 - Place</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/remove">35 - Remove</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/remove-joint">39 - Remove Joint</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/harvestable-destroy">40 - Harvestable Destroy WIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/lift-delete-creation">43 - Lift Delete Creation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/connect">44 - Connect</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/lift-import-creation">45 - Lift Import Creation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/interact">50 - Interact WIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/legacy">51 - Legacy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/networking/packets/lift-level">52 - Lift Level</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/protocol">Protocol</a><button aria-label="Toggle the collapsible sidebar category &#x27;Protocol&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/common-encoding-patterns">Common Encoding Patterns</a><button aria-label="Toggle the collapsible sidebar category &#x27;Common Encoding Patterns&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/packets"><span itemprop="name">Packets</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">32 - Container Transaction WIP</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Container Transaction</h1><p>This packet is sent when the player interacts with items inside of containers.</p><ul><li><strong>ID</strong>: 0x20 (32)</li><li><strong>Size</strong>: Variable</li><li><strong>LZ4 Compressed</strong>: Yes</li><li><strong>State</strong>: Playing</li><li><strong>Bound To</strong>: Client -&gt; Server</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="structure">Structure<a href="#structure" class="hash-link" aria-label="Direct link to Structure" title="Direct link to Structure">​</a></h2><p>This structure has not been fully documented yet. The Transaction Count field might play a different part in this packet.</p><p>A Transaction Count of <code>0</code> denotes there is no transaction at all. This can be reproduced by opening the inventory of a container, pickup up an item and releasing it in the same slot. This works for most items, but bearings and controllers sometimes trigger a Swap transaction with itself. No pattern has been found to predict which items trigger this behaviour.</p><p>A Transaction Count of <code>1</code> denotes the packet contains one transaction. This is the most common case.</p><p>A Transaction Count of <code>2</code> appears to show undefined behaviour. The first transaction works like normal, but the second transaction will have an Action ID that does not seem to be related to anything. This can be reproduced by opening the inventory of a Gas Container, picking up Gasoline from the hotbar and releasing it in the same hotbar slot, all while being in unlimited inventory mode. This will give a second transaction with Action ID <code>2</code>. Doing the same with a Battery inside of a Battery Container results in ID <code>87</code>. Water gives ID <code>20</code>, Potato Ammo <code>65</code>, Fertilizer <code>51</code>, etc. A Transaction Count of <code>2</code> seems to only be possible for containers that have a filter applied. The Action ID is deterministically resolved from the item. A container that accepts multiple item UUIDs has a different Action ID for each item.</p><p>Other values of Transaction Count have not been seen.</p><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x00</td><td>Transaction Count</td><td>be u32</td><td>How many transactions are in the transaction array. Sizes <code>0</code> and <code>1</code> are documented. Size <code>2</code> seems to follow the same format, but no sense is made of the data.</td></tr><tr><td>0x04</td><td>Transactions</td><td>Transaction[]</td><td>The array of transactions.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="itemstack">ItemStack<a href="#itemstack" class="hash-link" aria-label="Direct link to ItemStack" title="Direct link to ItemStack">​</a></h3><p>This structure is used by most transactions. It contains all information about an item and where it is located in which container.</p><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x00</td><td>Uuid</td><td>le u128</td><td>The UUID of the newly equiped item. <code>00000000-0000-0000-0000-000000000000</code> when no item is equipped</td></tr><tr><td>0x10</td><td>Tool Instance ID</td><td>be u32</td><td>The instance ID of the newly equiped tool. Always <code>0xFFFFFFFF</code> for items that are not tools or when no item is equipped.</td></tr><tr><td>0x14</td><td>Quantity</td><td>be u16</td><td>The amount of items in the item stack.</td></tr><tr><td>0x16</td><td>Slot</td><td>be u16</td><td>The index of slot in the container the item stack is located in.</td></tr><tr><td>0x18</td><td>Container ID</td><td>be u32</td><td>The ID of the container the item stack is in.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction">Transaction<a href="#transaction" class="hash-link" aria-label="Direct link to Transaction" title="Direct link to Transaction">​</a></h3><p>The transaction structure has a variable size. Every Action ID has its own structure.</p><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x00</td><td>Action</td><td>enum Action : u8</td><td>The type of the transaction.</td></tr><tr><td>0x01</td><td>Action Data</td><td>...</td><td>The data of the action. This depends on the value of Action.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="action-enum">Action enum<a href="#action-enum" class="hash-link" aria-label="Direct link to Action enum" title="Direct link to Action enum">​</a></h4><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The Action field has been left out in all of the following Action structures. The offsets still include the byte containing the action&#x27;s ID.</p></div></div><table><thead><tr><th>ID</th><th>Action</th></tr></thead><tbody><tr><td>0</td><td><a href="#action-0---set-item">Set Item</a></td></tr><tr><td>1</td><td><a href="#action-1---swap">Swap</a></td></tr><tr><td>2</td><td><a href="#action-2---collect">Collect</a></td></tr><tr><td>3</td><td><a href="#action-3---spend">Spend</a></td></tr><tr><td>4</td><td><a href="#action-4---collect-to-slot">Collect To Slot</a></td></tr><tr><td>5</td><td><a href="#action-5---collect-to-slot-or-collect">Collect To Slot Or Collect</a></td></tr><tr><td>6</td><td><a href="#action-6---spend-from-slot">Spend From Slot</a></td></tr><tr><td>7</td><td><a href="#action-7---move">Move</a></td></tr><tr><td>8</td><td><a href="#action-8---move-from-slot">Move From Slot</a></td></tr><tr><td>9</td><td><a href="#action-9---move-all">Move All</a></td></tr><tr><td>Other</td><td><a href="#default-action">Default Action</a></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="action-0---set-item">Action 0 - Set Item<a href="#action-0---set-item" class="hash-link" aria-label="Direct link to Action 0 - Set Item" title="Direct link to Action 0 - Set Item">​</a></h4><ul><li><strong>Description</strong>: Sets the item in the specified slot in the container to the item stack.</li><li><strong>Occurs when</strong>: Adding an item from the unlimited inventory into the hotbar. Both dragging the item as well as holding shift while clicking on the item will use this Action.</li></ul><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x01</td><td>To</td><td><a href="#itemstack">ItemStack</a></td><td>The item stack to set the slot in the container to.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="action-1---swap">Action 1 - Swap<a href="#action-1---swap" class="hash-link" aria-label="Direct link to Action 1 - Swap" title="Direct link to Action 1 - Swap">​</a></h4><ul><li><strong>Description</strong>: Swaps two item stacks. The <code>From</code> and <code>To</code> item stacks can be in two distinct containers.</li><li><strong>Occurs when</strong>: Dragging an item onto another item. The containers of the <code>From</code> and <code>To</code> item stacks must both be an unlimited inventory or both be a limited inventory. When one of the containers is an unlimited inventory and the other is a limited inventory, the <a href="#action-6---spend-from-slot">Spend From Slot</a> action will be used instead.</li></ul><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x01</td><td>From</td><td><a href="#itemstack">ItemStack</a></td><td><p>The item stack of the dragged item.</p><ul><li><strong>Uuid</strong>: Always <code>00000000-0000-0000-0000-000000000000</code></li><li><strong>Tool Instance ID</strong>: Always <code>0xFFFFFFFF</code></li><li><strong>Quantity</strong>: Always <code>0</code></li></ul></td></tr><tr><td>0x1D</td><td>To</td><td><a href="#itemstack">ItemStack</a></td><td><p>The item stack the dragged item is dropped onto.</p><ul><li><strong>Uuid</strong>: Always <code>00000000-0000-0000-0000-000000000000</code></li><li><strong>Tool Instance ID</strong>: Always <code>0xFFFFFFFF</code></li><li><strong>Quantity</strong>: Always <code>456</code></li></ul></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="action-2---collect">Action 2 - Collect<a href="#action-2---collect" class="hash-link" aria-label="Direct link to Action 2 - Collect" title="Direct link to Action 2 - Collect">​</a></h4><ul><li><strong>Description</strong>: Add an item to the container.</li><li><strong>Occurs when</strong>: Holding shift while clicking on an item in the player&#x27;s unlimited inventory backpack.</li></ul><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x01</td><td>Uuid</td><td>le u128</td><td>The UUID of the item to add to the container.</td></tr><tr><td>0x11</td><td>Unknown</td><td>be u32</td><td>Most likely the tool instance ID, but it is always <code>0xFFFFFFFF</code>, even for tools. The Lua API function <code>sm.container.collect</code> does not take any parameter that could result into this value being <code>0xFFFFFFFF</code>.</td></tr><tr><td>0x15</td><td>Quantity</td><td>be u16</td><td>The amount of items to add to the container.</td></tr><tr><td>0x17</td><td>Container ID</td><td>be u32</td><td>The ID of the container to add the items to.</td></tr><tr><td>0x1B</td><td>Unknown</td><td>u8</td><td>Not known to be anything other than <code>0x80</code>. Could possibly be related to the <code>mustCollectAll</code> parameter of the <code>sm.container.collect</code> Lua API function. Its description reads: <blockquote>Must collect all items for the transaction to be valid. Defaults to true. (Optional)</blockquote></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="action-3---spend">Action 3 - Spend<a href="#action-3---spend" class="hash-link" aria-label="Direct link to Action 3 - Spend" title="Direct link to Action 3 - Spend">​</a></h4><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This action calls <code>ContainerManager2.spend()</code> under the hood, but no usage of this action has been recorded. The documentation for this action has been reverse engineered from the executable.</p></div></div><ul><li><strong>Description</strong>: Removes a quantity of a given item from a container.</li><li><strong>Occurs when</strong>: Unknown.</li></ul><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x01</td><td>Uuid</td><td>le u128</td><td>The UUID of the item to remove from the container.</td></tr><tr><td>0x11</td><td>Unknown</td><td>be u32</td><td>Most likely the tool instance ID. The Lua API function <code>sm.container.spend</code> does not take any other integer parameters, but after reverse engineering the executable we can assume this field is the same as the <a href="#action-2---collect">Collect</a> action.</td></tr><tr><td>0x15</td><td>Quantity</td><td>be u16</td><td>The amount of items to remove from the container.</td></tr><tr><td>0x17</td><td>Container ID</td><td>be u32</td><td>The ID of the container to remove the items to.</td></tr><tr><td>0x1B</td><td>Unknown</td><td>u8</td><td>Could possibly be related to the <code>mustSpendAll</code> parameter of the <code>sm.container.spend</code> Lua API function. Its description reads: <blockquote>If true, only remove items if there are enough. If false, remove as many items as possible. Defaults to true. (Optional)</blockquote></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="action-4---collect-to-slot">Action 4 - Collect To Slot<a href="#action-4---collect-to-slot" class="hash-link" aria-label="Direct link to Action 4 - Collect To Slot" title="Direct link to Action 4 - Collect To Slot">​</a></h4><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This action calls <code>ContainerManager2.collectToSlot()</code> under the hood, but no usage of this action has been recorded. The documentation for this action has been reverse engineered from the executable.</p></div></div><ul><li><strong>Description</strong>: Adds an item to the specified slot of the container, up to the maximum stack size. The remaining number of items does not overflow to other slots.</li><li><strong>Occurs when</strong>: Unknown.</li></ul><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x01</td><td>To</td><td><a href="#itemstack">ItemStack</a></td><td>The item stack collected into the slot of the container.</td></tr><tr><td>0x1D</td><td>Unknown</td><td>u8</td><td>Could possibly be related to the <code>mustCollectAll</code> parameter of the <code>sm.container.collectToSlot</code> Lua API function. Its description reads: <blockquote>If true, only add items if there is enough room. If false, add as many items as possible. Defaults to true. (Optional)</blockquote></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="action-5---collect-to-slot-or-collect">Action 5 - Collect To Slot Or Collect<a href="#action-5---collect-to-slot-or-collect" class="hash-link" aria-label="Direct link to Action 5 - Collect To Slot Or Collect" title="Direct link to Action 5 - Collect To Slot Or Collect">​</a></h4><ul><li><strong>Description</strong>: Adds an item to the specified slot of the container. If the maximum stack size is reached, the remaining number of items will overflow into following slots when possible.</li><li><strong>Occurs when</strong>: Dragging an item from the player&#x27;s unlimited inventory backpack into a limited inventory container.</li></ul><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x01</td><td>To</td><td><a href="#itemstack">ItemStack</a></td><td>The item stack collected into the slot of the container.</td></tr><tr><td>0x1D</td><td>Unknown</td><td>u8</td><td>Not known to be anything other than <code>0x00</code>. Could possibly be related to the <code>mustCollectAll</code> parameter of the <code>sm.container.collectToSlot</code> Lua API function. Its description reads: <blockquote>If true, only add items if there is enough room. If false, add as many items as possible. Defaults to true. (Optional)</blockquote></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="action-6---spend-from-slot">Action 6 - Spend From Slot<a href="#action-6---spend-from-slot" class="hash-link" aria-label="Direct link to Action 6 - Spend From Slot" title="Direct link to Action 6 - Spend From Slot">​</a></h4><ul><li><strong>Description</strong>: Removes an item from the specified slot of the container.</li><li><strong>Occurs when</strong>: Dragging an item from the limited inventory container into the player&#x27;s unlimited inventory backpack.</li></ul><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x01</td><td>From</td><td><a href="#itemstack">ItemStack</a></td><td>The item stack removed from the slot of the container.</td></tr><tr><td>0x1D</td><td>Unknown</td><td>u8</td><td>Not known to be anything other than <code>0x00</code>. Could possibly be related to the <code>mustSpendAll</code> parameter of the <code>sm.container.spendFromSlot</code> Lua API function. Its description reads: <blockquote>If true, only remove items if there are enough. If false, remove as many items as possible. Defaults to true. (Optional)</blockquote></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="action-7---move">Action 7 - Move<a href="#action-7---move" class="hash-link" aria-label="Direct link to Action 7 - Move" title="Direct link to Action 7 - Move">​</a></h4><ul><li><strong>Description</strong>: Moves an item stack to an empty slot of a container. The <code>From</code> and <code>To</code> item stacks can be in two distinct containers.</li><li><strong>Occurs when</strong>: If the player has a limited inventory, dragging an item onto an empty slot of a container, or holding shift while clicking on an item to move the item between the hotbar and the backpack. <br> If the player has an unlimited inventory container, the Move action is only used when moving items from the hotbar to another empty hotbar slot while the backpack is open. Opening the GUI of another container and then dragging an item from the hotbar to another empty hotbar slot will use the <a href="#action-6---spend-from-slot">Spend From Slot</a> action instead.</li></ul><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x01</td><td>From</td><td><a href="#itemstack">ItemStack</a></td><td><p>The item stack of the moved item.</p><ul><li><strong>Uuid</strong>: Always <code>00000000-0000-0000-0000-000000000000</code></li><li><strong>Tool Instance ID</strong>: Always <code>0xFFFFFFFF</code></li><li><strong>Quantity</strong>: The amount of items moved. Can be less than the total amount of items an item stack contains.</li></ul></td></tr><tr><td>0x1D</td><td>To</td><td><a href="#itemstack">ItemStack</a></td><td><p>The empty slot the moved item is moved to.</p><ul><li><strong>Uuid</strong>: Always <code>00000000-0000-0000-0000-000000000000</code></li><li><strong>Tool Instance ID</strong>: Always <code>0xFFFFFFFF</code></li><li><strong>Quantity</strong>: Always <code>337</code></li></ul></td></tr><tr><td>0x39</td><td>Unknown</td><td>u8</td><td>Not known to be anything other than <code>0x00</code>.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="action-8---move-from-slot">Action 8 - Move From Slot<a href="#action-8---move-from-slot" class="hash-link" aria-label="Direct link to Action 8 - Move From Slot" title="Direct link to Action 8 - Move From Slot">​</a></h4><ul><li><strong>Description</strong>: Moves an item stack in the specified slot to another container.</li><li><strong>Occurs when</strong>: Holding shift while clicking on an item. Both containers must be limited inventory containers.</li></ul><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x01</td><td>From Slot</td><td>be u16</td><td>The index of the slot to be moved to the other container.</td></tr><tr><td>0x03</td><td>From Container ID</td><td>be u32</td><td>The ID of the container of the slot to be moved.</td></tr><tr><td>0x07</td><td>To Container ID</td><td>be u32</td><td>The ID of the container to move the slot to.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="action-9---move-all">Action 9 - Move All<a href="#action-9---move-all" class="hash-link" aria-label="Direct link to Action 9 - Move All" title="Direct link to Action 9 - Move All">​</a></h4><ul><li><strong>Description</strong>: Moves all items from one container to another container.</li><li><strong>Occurs when</strong>: Pressing the &quot;TAKE ALL&quot; button in the GUI of the bag a player leaves behind when respawning after death.</li></ul><table><thead><tr><th>Offset</th><th>Field Name</th><th>Field Type</th><th>Notes</th></tr></thead><tbody><tr><td>0x01</td><td>From Container ID</td><td>be u32</td><td>The ID of the container to move all items from.</td></tr><tr><td>0x05</td><td>To Container ID</td><td>be u32</td><td>The ID of the container to move all items to.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="default-action">Default Action<a href="#default-action" class="hash-link" aria-label="Direct link to Default Action" title="Direct link to Default Action">​</a></h4><p>In some cases a transaction with an action outside of the 0 to 9 range is created. The game treats these actions the same as <a href="#action-7---move">Action 7 - Move</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://pr.new/github.com/Scrap-Mods/docs/blob/main/docs/networking/packets/32-container-transaction.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/networking/packets/hotbar-item-changed"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">31 - Equipped Item Changed</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/networking/packets/drop-item-stack"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">33 - Drop Item Stack</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#structure" class="table-of-contents__link toc-highlight">Structure</a><ul><li><a href="#itemstack" class="table-of-contents__link toc-highlight">ItemStack</a></li><li><a href="#transaction" class="table-of-contents__link toc-highlight">Transaction</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/lua">Lua</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/packets">Networking</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/structures">Structures</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/misc">Misc</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/ahzyHPn3y2" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Scrap-Mods" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.27fe9af3.js"></script>
<script src="/assets/js/main.f6388a6a.js"></script>
</body>
</html>